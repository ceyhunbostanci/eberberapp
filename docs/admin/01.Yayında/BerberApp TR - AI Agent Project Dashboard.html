<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BerberApp TR | AI Agent Project Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plotly.js (Optional but included if needed for complex viz, though Chart.js is primary here) -->
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Chart Container Logic (Mandatory) */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Adapts to grid column */
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 1024px) {
            .chart-container { height: 350px; }
        }

        /* Utility for hiding sections */
        .hidden-section { display: none; }
        
        /* Card Hover Effects */
        .interactive-card { transition: all 0.2s ease-in-out; }
        .interactive-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); border-color: #3b82f6; }
        
        /* Navigation Active State */
        .nav-item.active { background-color: #e0f2fe; color: #0284c7; border-right: 3px solid #0284c7; }

        /* Roadmap Timeline Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
            z-index: 0;
        }
    </style>

    <!-- Placeholder Comments Required by Prompt -->
    <!-- Chosen Palette: Slate (Background), Blue (Primary/Action), Emerald (Success), Amber (Warning), Red (Risk). Corporate, clean, trustworthy. -->
    
    <!-- Application Structure Plan: 
         The app is designed as a "Mission Control" Dashboard for the Project Owner.
         1. Sidebar Navigation: persistent access to key domains (Dashboard, Roadmap, Architecture, Risks, Agents).
         2. Dynamic Content Area: The main view updates based on navigation without page reloads.
         3. Live "AI Log": A persistent widget showing simulated real-time activity of the AI agents to reinforce the "Agentic" nature of the project.
         4. Dashboard: High-level KPIs and Phase status for quick consumption.
         5. Roadmap: Detailed accordion-style breakdown of phases to track specific deliverables (DoD).
         6. Architecture: Interactive grid explaining the tech stack decisions (Supabase, Flutter, etc.).
         7. Risks: Bubble chart matrix to visually prioritize mitigation efforts.
    -->

    <!-- Visualization & Content Choices:
         1. Project Health (Dashboard): Simple statistic cards and progress bars to show immediate status.
         2. Risk Matrix (Risks): Chart.js Bubble Chart. Goal: Compare Probability vs. Impact. Interaction: Tooltip shows mitigation strategy.
         3. Cost Analysis (Dashboard): Chart.js Doughnut Chart. Goal: Visualize Low Cost vs. Premium features.
         4. Architecture Diagram (Tech Stack): CSS Grid with hover interactions. Goal: Organize complex system components. No SVG used.
         5. Roadmap (Roadmap): Vertical Timeline with JS-driven expansion. Goal: Inform about timeline and dependencies.
         6. AI Agent Roles (Team): Flex cards. Goal: Clarify RACI and responsibilities.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-64 bg-white border-r border-slate-200 flex flex-col hidden md:flex z-20 shadow-sm">
        <div class="p-6 border-b border-slate-100">
            <h1 class="text-xl font-bold text-slate-800 tracking-tight">BerberApp<span class="text-blue-600">TR</span></h1>
            <p class="text-xs text-slate-500 mt-1">AI Agent Dashboard v0.2</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1">
                <li>
                    <button onclick="navTo('dashboard')" id="nav-dashboard" class="nav-item active w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ“Š</span> Genel BakÄ±ÅŸ (Dashboard)
                    </button>
                </li>
                <li>
                    <button onclick="navTo('roadmap')" id="nav-roadmap" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ—ºï¸</span> Yol HaritasÄ± (Roadmap)
                    </button>
                </li>
                <li>
                    <button onclick="navTo('architecture')" id="nav-architecture" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ—ï¸</span> Mimari & Teknoloji
                    </button>
                </li>
                <li>
                    <button onclick="navTo('agents')" id="nav-agents" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ¤–</span> AI Agent Ekibi
                    </button>
                </li>
                <li>
                    <button onclick="navTo('risks')" id="nav-risks" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>âš ï¸</span> Risk Analizi
                    </button>
                </li>
            </ul>
        </nav>

        <div class="p-4 border-t border-slate-100 bg-slate-50">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-xs">AI</div>
                <div>
                    <p class="text-xs font-semibold text-slate-700">Sistem Durumu</p>
                    <p class="text-[10px] text-green-600 flex items-center gap-1">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Online
                    </p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 w-full bg-white border-b border-slate-200 z-30 px-4 py-3 flex justify-between items-center">
        <h1 class="text-lg font-bold text-slate-800">BerberApp<span class="text-blue-600">TR</span></h1>
        <button onclick="toggleMobileMenu()" class="text-slate-600 text-2xl">â˜°</button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-slate-800/90 z-40 hidden flex flex-col justify-center items-center space-y-6">
        <button onclick="mobileNav('dashboard')" class="text-white text-xl font-medium">Genel BakÄ±ÅŸ</button>
        <button onclick="mobileNav('roadmap')" class="text-white text-xl font-medium">Yol HaritasÄ±</button>
        <button onclick="mobileNav('architecture')" class="text-white text-xl font-medium">Mimari</button>
        <button onclick="mobileNav('agents')" class="text-white text-xl font-medium">AI Ekibi</button>
        <button onclick="mobileNav('risks')" class="text-white text-xl font-medium">Riskler</button>
        <button onclick="toggleMobileMenu()" class="text-slate-400 mt-8 text-sm">Kapat âœ•</button>
    </div>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative pt-16 md:pt-0">
        
        <!-- Header / Breadcrumb -->
        <header class="bg-white border-b border-slate-100 px-8 py-5 flex justify-between items-center shrink-0">
            <div>
                <h2 id="page-title" class="text-2xl font-bold text-slate-800">Proje Kontrol Paneli</h2>
                <p id="page-desc" class="text-sm text-slate-500 mt-1">AnlÄ±k durum ve ilerleme raporu.</p>
            </div>
            <div class="hidden lg:flex items-center gap-4">
                <span class="text-xs font-medium px-3 py-1 bg-blue-50 text-blue-700 rounded-full border border-blue-100">Faz 1: Aktif</span>
                <span class="text-xs font-medium px-3 py-1 bg-slate-100 text-slate-600 rounded-full">v0.2</span>
            </div>
        </header>

        <!-- Dynamic Content Container -->
        <div id="content-area" class="flex-1 overflow-y-auto p-4 md:p-8 bg-slate-50/50 scroll-smooth">
            
            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="space-y-8">
                <!-- Intro -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">YÃ¶netici Ã–zeti</h3>
                    <p class="text-slate-600 text-sm leading-relaxed">
                        Bu proje, TÃ¼rkiye pazarÄ± odaklÄ±, dÃ¼ÅŸÃ¼k maliyetli ve Ã¶lÃ§eklenebilir bir Berber Randevu Platformu (Android) geliÅŸtirmeyi hedefler. 
                        Mevcut durum <strong>Faz 1 (GeliÅŸtirme)</strong> aÅŸamasÄ±ndadÄ±r. AI Agent orkestrasyonu ile 80/20 kuralÄ±na gÃ¶re MVP hedeflenmektedir.
                    </p>
                </div>

                <!-- KPI Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="text-slate-400 text-xs font-semibold uppercase tracking-wider mb-1">Toplam Ä°lerleme</div>
                        <div class="text-3xl font-bold text-blue-600">35%</div>
                        <div class="w-full bg-slate-100 h-1.5 mt-3 rounded-full overflow-hidden">
                            <div class="bg-blue-500 h-full rounded-full" style="width: 35%"></div>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="text-slate-400 text-xs font-semibold uppercase tracking-wider mb-1">Aktif GÃ¶revler</div>
                        <div class="text-3xl font-bold text-slate-800">12</div>
                        <p class="text-xs text-orange-500 mt-2 font-medium">Auth & DB ÅemasÄ± (WIP)</p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="text-slate-400 text-xs font-semibold uppercase tracking-wider mb-1">Tahmini Maliyet</div>
                        <div class="text-3xl font-bold text-emerald-600">â‚º0</div>
                        <p class="text-xs text-slate-500 mt-2">Free Tier Limiti Dahilinde</p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="text-slate-400 text-xs font-semibold uppercase tracking-wider mb-1">Sonraki SÃ¼rÃ¼m</div>
                        <div class="text-3xl font-bold text-purple-600">MVP</div>
                        <p class="text-xs text-slate-500 mt-2">Hedef: Temel Randevu AkÄ±ÅŸÄ±</p>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Progress Chart -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h4 class="text-sm font-bold text-slate-700 mb-4 border-b border-slate-100 pb-2">Faz Ä°lerlemeleri</h4>
                        <div class="chart-container">
                            <canvas id="dashboardProgressChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Activity Log (Simulated) -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col h-full">
                        <h4 class="text-sm font-bold text-slate-700 mb-4 border-b border-slate-100 pb-2">AI Agent CanlÄ± GÃ¼nlÃ¼ÄŸÃ¼</h4>
                        <div id="ai-log-container" class="flex-1 overflow-y-auto max-h-[300px] space-y-3 pr-2 text-sm font-mono bg-slate-50 p-4 rounded-lg border border-slate-100">
                            <!-- JS will populate this -->
                            <div class="flex gap-2">
                                <span class="text-blue-500">[PM]</span>
                                <span class="text-slate-600">Proje kapsamÄ± doÄŸrulandÄ± (v0.2).</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: ROADMAP -->
            <div id="view-roadmap" class="hidden-section space-y-6">
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm mb-6">
                    <p class="text-slate-600">
                        Proje yaÅŸam dÃ¶ngÃ¼sÃ¼ 4 ana faza ayrÄ±lmÄ±ÅŸtÄ±r. Her fazÄ±n "Bitti TanÄ±mÄ±" (DoD) aÅŸaÄŸÄ±daki zaman Ã§izelgesinde detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r. 
                        GeliÅŸtirme ÅŸu an <strong>Faz 1</strong> iÃ§erisindedir.
                    </p>
                </div>

                <!-- Timeline Container -->
                <div class="relative pl-6 space-y-8 timeline-line" id="roadmap-container">
                    <!-- JS Generated Roadmap Items -->
                </div>
            </div>

            <!-- VIEW: ARCHITECTURE -->
            <div id="view-architecture" class="hidden-section space-y-6">
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Teknoloji YÄ±ÄŸÄ±nÄ± ve Mimari</h3>
                    <p class="text-slate-600 mb-4">
                        DÃ¼ÅŸÃ¼k maliyet ve yÃ¼ksek hÄ±z iÃ§in "Backend-as-a-Service" (Supabase) ve Cross-platform (Flutter) yapÄ±sÄ± seÃ§ilmiÅŸtir.
                        Bu mimari, MVP sonrasÄ± Ã¶lÃ§eklenebilirliÄŸi korurken baÅŸlangÄ±Ã§ maliyetlerini minimize eder.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Tech Card 1 -->
                    <div class="interactive-card bg-white p-6 rounded-xl border border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-slate-800">Frontend</h4>
                            <span class="text-2xl">ğŸ“±</span>
                        </div>
                        <div class="text-blue-600 font-bold text-lg mb-2">Flutter (Dart)</div>
                        <p class="text-sm text-slate-500 mb-3">Tek kod tabanÄ± ile Android Ã§Ä±ktÄ±sÄ±. HÄ±zlÄ± UI geliÅŸtirme.</p>
                        <ul class="text-xs text-slate-600 list-disc list-inside space-y-1">
                            <li>Riverpod (State Mng)</li>
                            <li>GoRouter (Navigasyon)</li>
                        </ul>
                    </div>

                    <!-- Tech Card 2 -->
                    <div class="interactive-card bg-white p-6 rounded-xl border border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-slate-800">Backend / DB</h4>
                            <span class="text-2xl">ğŸ”¥</span>
                        </div>
                        <div class="text-emerald-600 font-bold text-lg mb-2">Supabase</div>
                        <p class="text-sm text-slate-500 mb-3">PostgreSQL tabanlÄ± BaaS. Auth ve DB hazÄ±r.</p>
                        <ul class="text-xs text-slate-600 list-disc list-inside space-y-1">
                            <li>RLS (GÃ¼venlik)</li>
                            <li>PostGIS (Konum Verisi)</li>
                            <li>Edge Functions</li>
                        </ul>
                    </div>

                    <!-- Tech Card 3 -->
                    <div class="interactive-card bg-white p-6 rounded-xl border border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-slate-800">Harita & Konum</h4>
                            <span class="text-2xl">ğŸ—ºï¸</span>
                        </div>
                        <div class="text-purple-600 font-bold text-lg mb-2">MapLibre / Google</div>
                        <p class="text-sm text-slate-500 mb-3">Maliyet optimizasyonu iÃ§in hibrit yaklaÅŸÄ±m.</p>
                        <ul class="text-xs text-slate-600 list-disc list-inside space-y-1">
                            <li>OpenStreetMap (GÃ¶rÃ¼ntÃ¼)</li>
                            <li>Google Places (Arama)</li>
                        </ul>
                    </div>
                     <!-- Tech Card 4 -->
                     <div class="interactive-card bg-white p-6 rounded-xl border border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-slate-800">Media</h4>
                            <span class="text-2xl">â˜ï¸</span>
                        </div>
                        <div class="text-orange-600 font-bold text-lg mb-2">Cloudinary</div>
                        <p class="text-sm text-slate-500 mb-3">Resim optimizasyonu ve CDN.</p>
                        <ul class="text-xs text-slate-600 list-disc list-inside space-y-1">
                            <li>Auto-format</li>
                            <li>Ãœcretsiz Tier Yeterli</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- VIEW: AGENTS -->
            <div id="view-agents" class="hidden-section space-y-6">
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">AI Operasyon Modeli</h3>
                    <p class="text-slate-600">
                        Proje, otonom AI ajanlarÄ± tarafÄ±ndan yÃ¶netilmektedir. Her ajan belirli bir uzmanlÄ±k alanÄ±na (RACI matrisi) sahiptir.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="agents-grid">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- VIEW: RISKS -->
            <div id="view-risks" class="hidden-section space-y-6">
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Risk ve Uyum Matrisi</h3>
                    <p class="text-slate-600 mb-4">
                        AÅŸaÄŸÄ±daki grafik, tanÄ±mlanan risklerin <strong>OlasÄ±lÄ±k (Y ekseni)</strong> ve <strong>Etki (X ekseni)</strong> bazÄ±nda daÄŸÄ±lÄ±mÄ±nÄ± gÃ¶sterir.
                        BÃ¼yÃ¼k baloncuklar, dikkat edilmesi gereken yÃ¼ksek Ã¶ncelikli riskleri temsil eder.
                    </p>
                    <div class="chart-container">
                        <canvas id="riskBubbleChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                    <table class="w-full text-sm text-left text-slate-600">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-50 border-b border-slate-200">
                            <tr>
                                <th class="px-6 py-3">Risk</th>
                                <th class="px-6 py-3">AzaltÄ±m PlanÄ±</th>
                                <th class="px-6 py-3">Durum</th>
                            </tr>
                        </thead>
                        <tbody id="risk-table-body" class="divide-y divide-slate-100">
                            <!-- JS Populated -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </main>

    <!-- Logic Script -->
    <script>
        // --- DATA STORE ---
        const projectData = {
            phases: [
                {
                    id: 0,
                    title: "Faz 0: HazÄ±rlÄ±k & Kurulum",
                    status: "TamamlandÄ±",
                    color: "bg-emerald-500",
                    progress: 100,
                    details: [
                        "GitHub Reposu (BerberAppTR) aÃ§Ä±ldÄ±.",
                        "Supabase projesi oluÅŸturuldu.",
                        "Figma wireframe taslaklarÄ± hazÄ±rlandÄ±.",
                        "RACI matrisi ve roller tanÄ±mlandÄ±."
                    ]
                },
                {
                    id: 1,
                    title: "Faz 1: Ã‡ekirdek GeliÅŸtirme (Core)",
                    status: "Devam Ediyor",
                    color: "bg-blue-600",
                    progress: 40,
                    details: [
                        "Kimlik DoÄŸrulama (Auth) ekranlarÄ± kodlanÄ±yor.",
                        "VeritabanÄ± ÅŸemasÄ± (Schema) migrate ediliyor.",
                        "Harita entegrasyonu (MapLibre) testi.",
                        "Berber Profil sayfasÄ± UI tasarÄ±mÄ±."
                    ]
                },
                {
                    id: 2,
                    title: "Faz 2: Test & QA",
                    status: "Beklemede",
                    color: "bg-slate-300",
                    progress: 0,
                    details: [
                        "Birim testleri (Unit Tests).",
                        "UAT (KullanÄ±cÄ± Kabul Testi) senaryolarÄ±.",
                        "Performans optimizasyonu (App boyutu).",
                        "Hata ayÄ±klama (Bug fixing)."
                    ]
                },
                {
                    id: 3,
                    title: "Faz 3: Lansman & DaÄŸÄ±tÄ±m",
                    status: "PlanlandÄ±",
                    color: "bg-slate-300",
                    progress: 0,
                    details: [
                        "Google Play Store hazÄ±rlÄ±ÄŸÄ± (Aso, gÃ¶rseller).",
                        "Pilot bÃ¶lge (MVP) Ã§Ä±kÄ±ÅŸÄ±.",
                        "KullanÄ±cÄ± geri bildirim toplama mekanizmasÄ±."
                    ]
                }
            ],
            agents: [
                { role: "Product Owner (PO)", name: "AI Visionary", focus: "Kapsam, MVP Ã–nceliÄŸi", icon: "ğŸ‘‘" },
                { role: "Solution Architect", name: "AI Architect", focus: "Supabase, DB, API", icon: "ğŸ“" },
                { role: "Frontend Dev", name: "AI Flutter Dev", focus: "UI/UX, Widget, State", icon: "ğŸ“±" },
                { role: "QA Engineer", name: "AI Tester", focus: "Test Case, UAT", icon: "ğŸ" },
                { role: "DevOps", name: "AI Ops", focus: "CI/CD, GitHub, Store", icon: "ğŸš€" }
            ],
            risks: [
                { name: "Sahte Berber HesaplarÄ±", impact: 3, probability: 2, mitigation: "Admin onayÄ± + Åikayet sistemi", status: "Open" },
                { name: "Ã‡ift Rezervasyon", impact: 4, probability: 1, mitigation: "DB Transaction + Unique Constraint", status: "Managed" },
                { name: "Harita Maliyeti ArtÄ±ÅŸÄ±", impact: 3, probability: 2, mitigation: "MapLibre kullanÄ±mÄ± + API limitleri", status: "Monitor" },
                { name: "KVKK UyumsuzluÄŸu", impact: 4, probability: 2, mitigation: "AydÄ±nlatma metni + Veri minimizasyonu", status: "Open" },
                { name: "TasarÄ±m RevizyonlarÄ±", impact: 2, probability: 3, mitigation: "Component sistemi + Ã–n onay", status: "Managed" }
            ]
        };

        // --- CHART INITIALIZATION ---
        
        // 1. Progress Chart (Doughnut)
        function initDashboardChart() {
            const ctx = document.getElementById('dashboardProgressChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: projectData.phases.map(p => p.title.split(':')[0]),
                    datasets: [{
                        data: projectData.phases.map(p => p.progress > 0 ? p.progress : 5), // Min visual value
                        backgroundColor: ['#10b981', '#2563eb', '#cbd5e1', '#f1f5f9'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 10, usePointStyle: true, font: {family: 'Inter'} } }
                    }
                }
            });
        }

        // 2. Risk Bubble Chart
        function initRiskChart() {
            const ctx = document.getElementById('riskBubbleChart').getContext('2d');
            const dataPoints = projectData.risks.map(r => ({
                x: r.impact, // Impact on X
                y: r.probability, // Probability on Y
                r: (r.impact * r.probability) * 2 // Bubble size based on Risk Score
            }));

            new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Risk DaÄŸÄ±lÄ±mÄ±',
                        data: dataPoints,
                        backgroundColor: 'rgba(239, 68, 68, 0.6)',
                        borderColor: 'rgba(239, 68, 68, 1)',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            title: { display: true, text: 'Etki (1-5)' },
                            min: 0, max: 5,
                            grid: { display: false }
                        },
                        y: { 
                            title: { display: true, text: 'OlasÄ±lÄ±k (1-5)' },
                            min: 0, max: 5 
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const risk = projectData.risks[context.dataIndex];
                                    return `${risk.name}: Etki ${risk.impact}, OlasÄ±lÄ±k ${risk.probability}`;
                                },
                                afterLabel: function(context) {
                                    const risk = projectData.risks[context.dataIndex];
                                    return `Ã‡Ã¶zÃ¼m: ${risk.mitigation}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // --- RENDER FUNCTIONS ---

        function renderRoadmap() {
            const container = document.getElementById('roadmap-container');
            container.innerHTML = '';
            
            projectData.phases.forEach((phase, index) => {
                const isLast = index === projectData.phases.length - 1;
                const html = `
                    <div class="relative z-10 group cursor-pointer" onclick="toggleRoadmapDetail(${index})">
                        <div class="flex items-center gap-4 mb-2">
                            <div class="w-8 h-8 rounded-full ${phase.progress === 100 ? 'bg-emerald-500' : (phase.progress > 0 ? 'bg-blue-600' : 'bg-slate-200')} text-white flex items-center justify-center font-bold text-sm shadow-md transition-all group-hover:scale-110">
                                ${index}
                            </div>
                            <div class="flex-1 bg-white p-4 rounded-lg border border-slate-200 shadow-sm group-hover:border-blue-300 transition-colors">
                                <div class="flex justify-between items-center">
                                    <h4 class="font-bold text-slate-700">${phase.title}</h4>
                                    <span class="text-xs px-2 py-1 rounded bg-slate-100 text-slate-600">${phase.status}</span>
                                </div>
                                <div class="w-full bg-slate-100 h-1.5 mt-3 rounded-full overflow-hidden">
                                    <div class="${phase.color} h-full rounded-full" style="width: ${phase.progress}%"></div>
                                </div>
                                <div id="phase-detail-${index}" class="hidden mt-4 pt-4 border-t border-slate-100 text-sm text-slate-600">
                                    <p class="font-semibold mb-2">GÃ¶revler & DoD:</p>
                                    <ul class="list-disc list-inside space-y-1 pl-1">
                                        ${phase.details.map(d => `<li>${d}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function toggleRoadmapDetail(index) {
            const el = document.getElementById(`phase-detail-${index}`);
            el.classList.toggle('hidden');
        }

        function renderAgents() {
            const container = document.getElementById('agents-grid');
            container.innerHTML = projectData.agents.map(agent => `
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex items-start gap-4 hover:border-blue-400 transition-all">
                    <div class="w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center text-3xl">
                        ${agent.icon}
                    </div>
                    <div>
                        <h4 class="font-bold text-slate-800">${agent.role}</h4>
                        <p class="text-xs text-blue-600 font-medium mb-1">${agent.name}</p>
                        <p class="text-sm text-slate-500">${agent.focus}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderRisksTable() {
            const tbody = document.getElementById('risk-table-body');
            tbody.innerHTML = projectData.risks.map(risk => `
                <tr class="bg-white hover:bg-slate-50">
                    <td class="px-6 py-4 font-medium text-slate-800">${risk.name}</td>
                    <td class="px-6 py-4 text-xs">${risk.mitigation}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${risk.status === 'Open' ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">
                            ${risk.status}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // --- NAVIGATION LOGIC ---
        function navTo(viewId) {
            // Hide all sections
            ['dashboard', 'roadmap', 'architecture', 'agents', 'risks'].forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden-section');
                document.getElementById(`nav-${id}`)?.classList.remove('active');
            });

            // Show selected
            document.getElementById(`view-${viewId}`).classList.remove('hidden-section');
            document.getElementById(`nav-${viewId}`)?.classList.add('active'); // Mobile nav doesn't have ID but sidebar does

            // Update Header
            const titles = {
                'dashboard': ['Proje Kontrol Paneli', 'AnlÄ±k durum ve ilerleme raporu.'],
                'roadmap': ['Proje Yol HaritasÄ±', 'Fazlar, gÃ¶revler ve zaman Ã§izelgesi.'],
                'architecture': ['Teknik Mimari', 'Sistem bileÅŸenleri ve teknoloji tercihleri.'],
                'agents': ['AI Operasyon Ekibi', 'Sanal Ã§alÄ±ÅŸanlar ve sorumluluklarÄ±.'],
                'risks': ['Risk YÃ¶netimi', 'Tehditler ve azaltma stratejileri.']
            };
            document.getElementById('page-title').innerText = titles[viewId][0];
            document.getElementById('page-desc').innerText = titles[viewId][1];

            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        function mobileNav(viewId) {
            navTo(viewId);
            toggleMobileMenu();
        }

        // --- SIMULATED AI LOG ---
        const logMessages = [
            { role: "AI Architect", msg: "Supabase RLS politikalarÄ± kontrol edildi." },
            { role: "AI Flutter Dev", msg: "Randevu kartÄ± bileÅŸeni gÃ¼ncellendi." },
            { role: "AI Tester", msg: "Login ekranÄ± iÃ§in unit test yazÄ±ldÄ±." },
            { role: "AI PM", msg: "Roadmap Faz 1 ilerlemesi %41'e gÃ¼ncellendi." },
            { role: "AI Ops", msg: "GitHub Actions derleme baÅŸarÄ±lÄ±." }
        ];

        function startAiLogSimulation() {
            const container = document.getElementById('ai-log-container');
            
            setInterval(() => {
                const randomMsg = logMessages[Math.floor(Math.random() * logMessages.length)];
                const time = new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute:'2-digit' });
                
                const div = document.createElement('div');
                div.className = "flex gap-2 animate-pulse";
                div.innerHTML = `
                    <span class="text-slate-400 text-xs">[${time}]</span>
                    <span class="text-blue-600 font-bold text-xs">${randomMsg.role}:</span>
                    <span class="text-slate-600 text-xs">${randomMsg.msg}</span>
                `;
                
                container.prepend(div);
                
                // Keep clean
                if (container.children.length > 10) container.lastElementChild.remove();
                
                // Remove pulse after a bit
                setTimeout(() => div.classList.remove('animate-pulse'), 1000);
            }, 3500); // New msg every 3.5s
        }

        // --- INIT ---
        window.onload = function() {
            initDashboardChart();
            initRiskChart();
            renderRoadmap();
            renderAgents();
            renderRisksTable();
            startAiLogSimulation();
        };

    </script>
</body>
</html>